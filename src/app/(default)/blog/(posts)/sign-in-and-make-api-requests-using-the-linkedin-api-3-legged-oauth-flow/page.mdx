---
title: Sign In and Make API Requests using the LinkedIn API (3-legged OAuth Flow)
seoTitle: How I Built my Blog using MDX, Next.js, and React
abstract: `Integrating the LinkedIn API into a web app is quite complex. This post breaks down how to sign in and get basic profile information.`
isPublished: true
publishedOn: 1 jan 2022
layout: Article
tags:
  - personal
  - beliefs
---

While building a web application on top of the LinkedIn API, I realized that it’s quite difficult to work with the API. The documentation is bad and the rate limit is harsh. Before you know it, the documentation has driven you to despair and the rate limit has kicked-in. Therefore, in this post, I’ll cover two key aspects of the API: OpenID Connect sign in and getting a user’s basic profile information. To do this, I’ll walk through the Member Authorization (3-legged OAuth Flow) step-by-step.

Note that sometimes small changes are made to the LinkedIn API. Since OpenID Connect is new, I expect it to be around for quite some time without major changes. If there have been changes to the API, I expect this guide to still be a good guideline to navigate through the OAuth process.

Sign In with LinkedIn using OpenID Connect
Let’s start by understanding how we can sign in using the LinkedIn API. This is useful if we want to give users a “sign in with LinkedIn” option on our web app. And it’s also required to (i) get user information and (ii) make API calls on his behalf (e.g. to send a post).

1. Create and Configure a LinkedIn App
To begin, we need to create an application on LinkedIn and subscribe to the correct products in the developer portal. Make sure that you are logged in, navigate to “My Apps”, and then to “Create App”. You’ll see the form below that’s straight forward to fill out.


After the new App has been created, request access to the products “Sign In with LinkedIn using OpenID Connect” and “Share on LinkedIn”. This can be done directly from within the new App. Once the products are added, you’ll see them under the “Added Products” section as shown in the image below.


Then navigate to the Auth tab of the App (see image below) and get the Client ID and Client Secret. These two keys are required in the steps that follow. You also need to configure an authorized redirect URL for your app. If you’re testing locally, you can set it to “http://localhost:3000/” as in the image below. This is the URL that users are sent back to after the authorization flow is complete.


2. Authenticate and Consent
Before we can make an authorized request to the LinkedIn API on the user’s behalf, the user needs to verify his identity (authenticate) and allow our web app to do stuff on his behalf (consent). If this step is successful, we’ll receive an authorization code that can be exchanged for an access token. The access token, in turn, allows us to make authenticated requests to the LinkedIn API. Let’s start by getting the authorization code.

To initiate the “authorization code flow”, a GET request has to be made to https://www.linkedin.com/oauth/v2/authorization with the query parameters listed below:


LinkedIn Docs
Here’s a sample GET request with placeholders:

GET https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id={your_client_id}&redirect_uri={your_callback_url}&state={your_state_value}&scope={your_scope}
And here’s a sample GET request filled with example query parameter values:

GET https://api.linkedin.com/oauth/v2/authorization?response_type=code&client_id=77tsl6y9il80zj&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F&state=foobar&scope=openid,profile,email,w_member_social

This request redirects the browser to the OAuth page (see image below) where the user authenticates by signing in.


After a successful sign in, the user needs to consent that the app can do stuff on his behalf. You can also see the callback URL that we defined under step 1, local-host, at the bottom of the window (see below).


3. Get an Authorization Code
Once the user clicks “allow”, he is redirected to the callback URL (from step 1) and the URL also contains two query parameters: code and state:

code: OAuth 2.0 authorization code.
state: A value used to test for possible CSRF attacks.
Here’s an example of the URL with the query parameters that come after the “?”:

http://localhost:3000/?code=AQRbvd0fQnUTtC5IF34Bohz-08nCGn3d453J_eb4c0ucF59t34-5TZ9Ix535v6rjpvNzpXZz9pRtt6Mks2ss0fZbUVsmfl42vcigQzhjfK-fcq4WikA4pF_oIfNU312aklX9J8SpdlXwAVc30QGPoM4dq1vI6533YNv_QJiVpx_TXBfsF2Fq3cV1P5sssHgQxtAiu-q1FcfdXb_qTfE&state=foobar

The authorization code can now be exchanged for an access token which we’ll do in the next step.

4. Exchange Authorization Code for an Access Token
The next step is to get an access token. Using this token, authorized requests can be sent to the LinkedIn API. This time a POST request needs to be sent to https://www.linkedin.com/oauth/v2/accessToken with the query parameters listed below:


Here’s a sample POST request with placeholders:

https://www.linkedin.com/oauth/v2/accessToken?grant_type=authorization_code&code={your_oauth_authorization_code}&client_secret={your_client_secret}&redirect_uri={your_callback_url}
And here’s a sample POST request filled with example query parameter values:

https://www.linkedin.com/oauth/v2/accessToken?grant_type=authorization_code&code=AQT5kBOLTSJAqOxeseJ2u548-CNe5wydLVB1-zOIWHT1wuHOTF3mdi5OQ0ry6zUtxXp57CGCiRhJjojPDXjMRgUSkYraBVUrsOV90-9loCmbMh_7eBZcgtWFJUgIOf6UGxqBJUjEjl7QyATRQh7ddDw242U3hPRtM6L2xm51A5BraDQL0Hcd-BDF-OIYhKs&client_id=78tzdy4is0zj&client_secret=VdsbJsdOh4oVGI&redirect_uri=http://localhost:3000/

If your access token request is successful, you’ll receive a response with an access token. Here’s an example:

```json
{
    "access_token": "AQU3ZSmt...",
    "expires_in": 5183999,
    "scope": "email,openid,profile",
    "token_type": "Bearer",
    "id_token": "eyJ6aXAiOi..."
}
´´´

Here’s some information on the individual fields of the response:


LinkedIn Docs
This concludes the LinkedIn OpenID Connect sign in process. The access token from the response above can be used to make authenticated requests on the user’s behalf. Let’s take a look at that in more detail below!

Making Authenticated Requests
Let’s take a look at how we can obtain some basic profile information using the access token that we obtained from the sign in process. To do this, all we need to do is send a GET request to https://api.linkedin.com/v2/userinfo with the access token:

curl -X GET https://api.linkedin.com/v2/userinfo' \
-H 'Authorization: Bearer {INSERT_TOKEN}'
This will return a response with information that we can use in our web app. It looks as follows:

{
    "sub": "sdrKNP4r2F",
    "email_verified": true,
    "name": "Peter Example",
    "locale": {
        "country": "NL",
        "language": "nl"
    },
    "given_name": "Peter",
    "family_name": "Example",
    "email": "peterexample@gmail.com",
    "picture": "https://media.licdn.com/dms/image/D5606AQEwBEmfdl-mcQ/profile-displayphoto-shrink_100_100/0/1715123659995?e=172065700&v=beta&t=Igql55Iv-tVDccAB-x6YX9Hw6f5WGYt8jRyiriNnM"
}